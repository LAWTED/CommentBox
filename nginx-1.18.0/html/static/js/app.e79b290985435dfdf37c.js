webpackJsonp([1],{"5R9d":function(t,e){},"6O9Q":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"postBody"},[t.show?n("div",[n("h1",[t._v(t._s(t.post.title))])]):n("div",[n("h1",[t._v("loading...")])]),t._v(" "),n("div",{staticClass:"comment-count"},[t._v("\n    "+t._s(t.commentCount)+" 条评论\n  ")])])},staticRenderFns:[]};var a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"commentbox"},[n("div",{staticClass:"commentForm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{placeholder:"  友善的评论是交流的起点",onfocus:"this.placeholder=''",onblur:"this.placeholder='  友善的评论是交流的起点'"},domProps:{value:t.message},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitComment(e)},input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.submitComment}},[t._v("提交")])]),t._v(" "),t._l(t.reversedComments,function(e){return n("div",{key:e.id,staticClass:"commentShow"},[t._v("\n    "+t._s(e.body)+"\n  ")])})],2)},staticRenderFns:[]};var i={name:"Post",components:{PostBody:n("VU/8")({name:"PostBody",props:["postId"],computed:{show:function(){return this.post},commentCount:function(){return this.$store.getters.getComments(this.postId).length},post:function(){var t=this;return this.$store.state.post.all.find(function(e){return e.id===t.postId})}}},o,!1,function(t){n("gGgv")},"data-v-30bb2f36",null).exports,CommentBox:n("VU/8")({name:"CommentBox",data:function(){return{message:""}},computed:{postId:function(){return this.$route.params.id},comments:function(){return this.$store.getters.getComments(this.postId)},reversedComments:function(){return this.comments.slice().reverse()}},methods:{submitComment:function(){if(this.message){var t={body:this.message,post:this.postId};this.$store.dispatch({type:"addComment",comment:t}),this.message=""}}}},a,!1,function(t){n("vHvP")},"data-v-7b16a9fe",null).exports},data:function(){return{title:"在这里评论"}},computed:{postId:function(){return this.$route.params.id}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"post"},[e("div",{staticClass:"upper"},[e("PostBody",{attrs:{postId:this.postId}})],1),this._v(" "),e("div",{staticClass:"bottom"},[e("CommentBox")],1)])},staticRenderFns:[]};var m=n("VU/8")(i,r,!1,function(t){n("zkRQ")},"data-v-6dd60633",null).exports,c={name:"app",created:function(){this.$store.dispatch({type:"loadComments"}),this.$store.dispatch({type:"loadPosts"})},components:{Post:m}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var d=n("VU/8")(c,u,!1,function(t){n("5R9d")},null,null).exports,l=n("/ocq"),p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("ul",t._l(t.posts,function(e){return n("li",{key:e.id},[n("div",{staticClass:"list"},[n("h2",[n("router-link",{attrs:{to:"post/"+e.id}},[t._v(t._s(e.title))])],1)])])}),0)])},staticRenderFns:[]};var v=n("VU/8")({name:"Home",computed:{posts:function(){return this.$store.state.post.all}}},p,!1,function(t){n("6O9Q")},"data-v-7007d5f8",null).exports;s.a.use(l.a);var f=new l.a({mode:"hash",routes:[{path:"/",component:v},{path:"/post/:id",component:m}]}),h=n("NYxO"),C=n("mtWM"),_=n.n(C),g={state:{all:[]},mutations:{addComment:function(t,e){t.all.push(e)},loadComments:function(t,e){t.all=e}},actions:{addComment:function(t,e){var n=t.commit,s=e.comment;_.a.post("/apis/Ecomments",s).then(function(t){var e=t.data;n("addComment",e)})},loadComments:function(t){var e=t.commit;_.a.get("/apis/Ecomments").then(function(t){var n=t.data;e("loadComments",n)})}},getters:{getComments:function(t){return function(e){return t.all.filter(function(t){return t.post===e})}}}},y={state:{all:[]},mutations:{loadPosts:function(t,e){t.all=e}},actions:{loadPosts:function(t){var e=t.commit;_.a.get("/apis/Epost").then(function(t){var n=t.data;e("loadPosts",n)})}}};s.a.use(h.a);var b=new h.a.Store({modules:{comment:g,post:y}});s.a.config.productionTip=!1,new s.a({el:"#app",components:{App:d},router:f,store:b,template:"<App/>"})},gGgv:function(t,e){},vHvP:function(t,e){},zkRQ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e79b290985435dfdf37c.js.map